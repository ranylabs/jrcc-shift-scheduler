* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-base);
  background: var(--bg);
  color: var(--text);
}

button,
input,
select {
  font: inherit;
}

.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
  direction: rtl;
  text-align: right;
  --theme-font-scale: 1;
}

.app__header {
  background: linear-gradient(135deg, #0c6a53, #0f8f6f);
  color: #ffffff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1rem 1.25rem;
}

.app__header h1,
.app__header p {
  margin: 0;
}

.app__header p {
  margin-top: 0.3rem;
  opacity: 0.92;
}

.toolbar {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 0.75rem;
  align-items: center;
  background: var(--panel-bg);
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 0.75rem;
}

.toolbar__group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.toolbar button {
  border: var(--grid-border-width) solid var(--grid-border-color);
  background: #ffffff;
  border-radius: var(--radius);
  padding: 0.45rem 0.75rem;
  cursor: pointer;
}

.toolbar button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.toolbar__monthLabel,
.toolbar__cloud {
  color: var(--muted-text);
  font-weight: 600;
  white-space: nowrap;
}

.cloudBanner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
  background: #fff7ed;
  border: var(--grid-border-width) solid #fdba74;
  border-radius: var(--radius);
  padding: 0.45rem 0.65rem;
  color: #7c2d12;
  font-size: 0.88rem;
}

.cloudBanner button {
  border: var(--grid-border-width) solid #fdba74;
  background: #ffffff;
  border-radius: 8px;
  padding: 0.35rem 0.55rem;
  cursor: pointer;
  color: #7c2d12;
}

.themePanel {
  background: var(--panel-bg);
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 0.75rem;
}

.themePanel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  margin-bottom: 0.6rem;
}

.themePanel__header h3 {
  margin: 0;
  font-size: 1rem;
}

.themePanel__header button {
  border: var(--grid-border-width) solid var(--grid-border-color);
  background: #ffffff;
  border-radius: var(--radius);
  padding: 0.35rem 0.6rem;
  cursor: pointer;
}

.themePanel__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 0.55rem 0.8rem;
}

.themePanel__control {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  color: var(--muted-text);
}

.themePanel__control span {
  font-size: 0.85rem;
}

.themePanel__control input[type='color'] {
  width: 100%;
  min-height: 34px;
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: 8px;
  background: transparent;
  padding: 0;
}

.themePanel__control select {
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: 8px;
  padding: 0.35rem 0.45rem;
  background: #ffffff;
}

.themePanel__toggle {
  display: flex;
  align-items: center;
  gap: 0.45rem;
  color: var(--muted-text);
  font-weight: 600;
}

.themePanel__rangeWrap {
  display: grid;
  grid-template-columns: 1fr 64px;
  gap: 0.4rem;
  align-items: center;
}

.themePanel__rangeWrap input[type='range'],
.themePanel__rangeWrap input[type='number'] {
  width: 100%;
}

.themePanel__rangeWrap input[type='number'] {
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: 8px;
  padding: 0.3rem 0.35rem;
}

.app__main {
  min-height: 0;
  display: grid;
  grid-template-columns: minmax(320px, 1fr) 340px;
  gap: 1rem;
}

.board,
.employeePanel,
.app__footer {
  background: var(--panel-bg);
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.board {
  padding: 0.55rem;
  overflow: hidden;
}

.calendarWrap {
  width: 100%;
  overflow: hidden;
}

.grid {
  display: grid;
  width: 100%;
  direction: rtl;
  align-items: stretch;
  gap: 0 !important;
  row-gap: 0 !important;
  column-gap: 0 !important;
}

.grid__header,
.grid__row {
  display: contents;
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
}

.grid__employeeCell,
.grid__dayCell {
  min-width: 0;
  height: var(--cell-height);
  min-height: var(--cell-height);
  max-height: var(--cell-height);
  padding: var(--cell-padding-y) var(--cell-padding-x);
  border: var(--grid-border-width) solid var(--grid-border-color);
  font-size: calc(var(--font-cell) * var(--theme-font-scale));
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 !important;
}

.grid__dayCell {
  padding-top: 0;
  padding-bottom: 0;
}

.grid__employeeCell {
  text-align: center;
  justify-content: center;
  flex-direction: column;
  align-items: center;
  font-size: calc(var(--font-employee) * var(--theme-font-scale));
  border-left-width: var(--divider-employee-days-width);
  white-space: normal;
  overflow-wrap: anywhere;
  line-height: 1.2;
}

.grid__headerCell {
  font-size: calc(var(--font-day) * var(--theme-font-scale));
  font-weight: 700;
}

.grid__dayNumberCell {
  font-size: calc(var(--daynum-font-size) * var(--theme-font-scale));
}

.grid__weekdayLabelCell {
  font-size: calc(var(--weekday-font-size) * var(--theme-font-scale));
}

.grid__headerBottom {
  border-bottom-width: var(--divider-header-body-width);
}

.grid__row.is-row-even .grid__dayCell,
.grid__row.is-row-even .grid__employeeCell {
  background: var(--row-even-bg);
}

.grid__row.is-row-odd .grid__dayCell,
.grid__row.is-row-odd .grid__employeeCell {
  background: var(--row-odd-bg);
}

.grid__dayCell.is-weekend,
.grid__headerCell.is-weekend,
.grid__row.is-row-even .grid__dayCell.is-weekend,
.grid__row.is-row-odd .grid__dayCell.is-weekend {
  background: var(--weekend-bg);
}

.weekday-header-gradient-on .grid__weekdayLabelCell:not(.is-weekend) {
  background: linear-gradient(
    135deg,
    var(--weekday-header-gradient-start),
    var(--weekday-header-gradient-end)
  );
}

.grid__employeeName {
  font-size: calc(var(--font-employee) * var(--theme-font-scale));
  font-weight: 700;
  line-height: 1.2;
}

.grid__employeeRole {
  color: var(--muted-text);
  font-size: calc((var(--font-employee) - 2px) * var(--theme-font-scale));
}

.grid__employeeSummary {
  color: var(--muted-text);
  font-size: calc((var(--font-employee) - 3px) * var(--theme-font-scale));
}

.grid__employeeIssue {
  color: #a11f34;
  font-size: calc((var(--font-employee) - 3px) * var(--theme-font-scale));
}

.grid__fixCell {
  font-weight: 700;
  color: #ac2542;
}

.schedule-cell {
  width: 100%;
  height: var(--cell-height);
  min-height: var(--cell-height);
  max-height: var(--cell-height);
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  background: transparent;
  background-color: transparent !important;
  cursor: pointer;
  font-size: calc(var(--font-cell) * var(--theme-font-scale));
  font-weight: 700;
  outline: none !important;
  box-shadow: none !important;
  text-shadow: none !important;
  filter: none !important;
  appearance: none;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}

.schedule-cell::before,
.schedule-cell::after {
  content: none !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  outline: none !important;
}

.schedule-cell > *,
.schedule-cell span {
  background: transparent !important;
  background-color: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  outline: none !important;
  text-shadow: none !important;
  filter: none !important;
}

.schedule-cell__letter {
  font-size: var(--shift-letter-size) !important;
  font-weight: var(--shift-letter-weight) !important;
  color: var(--shift-letter-color);
  text-align: var(--shift-letter-align);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  line-height: 1;
  background: transparent !important;
  background-color: transparent !important;
  padding: 0 !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  outline: none !important;
  text-shadow: none !important;
  filter: none !important;
}

.schedule-cell__letter::before,
.schedule-cell__letter::after {
  content: none !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  outline: none !important;
}

.grid__dayCell > * {
  background: transparent;
  border: 0;
  box-shadow: none;
}

.schedule-cell__letter--M {
  color: var(--shift-morning-text);
}

.schedule-cell__letter--N {
  color: var(--shift-night-text);
}

.schedule-cell__letter--X {
  color: var(--shift-x-text);
}

.schedule-cell--M {
  background: var(--shift-morning-bg);
}

.schedule-cell--N {
  background: var(--shift-night-bg);
}

.schedule-cell--X {
  background: var(--shift-x-bg);
}

.grid__row .grid__dayCell {
  padding: 0;
}

.schedule-cell:hover,
.schedule-cell:focus,
.schedule-cell:active,
.schedule-cell:focus-visible,
.schedule-cell:visited,
.schedule-cell .schedule-cell__letter:hover,
.schedule-cell .schedule-cell__letter:focus,
.schedule-cell .schedule-cell__letter:active,
.schedule-cell .schedule-cell__letter:focus-visible,
.schedule-cell--X:hover,
.schedule-cell--X:focus,
.schedule-cell--X:active,
.schedule-cell--X:focus-visible,
.schedule-cell--X:visited,
.schedule-cell--M:hover,
.schedule-cell--M:focus,
.schedule-cell--M:active,
.schedule-cell--M:focus-visible,
.schedule-cell--M:visited,
.schedule-cell--N:hover,
.schedule-cell--N:focus,
.schedule-cell--N:active,
.schedule-cell--N:focus-visible,
.schedule-cell--N:visited {
  outline: none !important;
  box-shadow: none !important;
  text-shadow: none !important;
  border: none !important;
  filter: none !important;
}

.employeePanel {
  padding: 0.75rem;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.employeePanel__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.employeePanel__header h2 {
  margin: 0;
}

.employeePanel__list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.employeeCard {
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: var(--radius);
  background: #ffffff;
  padding: 0.35rem;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.35rem;
}

.employeeCard--active {
  border-color: #0f8f6f;
}

.employeeCard__select {
  background: transparent;
  border: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.45rem;
  text-align: right;
}

.employeeCard__delete {
  color: #ac2542;
  background: transparent;
  border: 0;
}

.employeeEditorWrap {
  grid-column: 1 / -1;
  padding-top: 0.35rem;
}

.employeeForm {
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
  background: #f8fbfa;
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: var(--radius);
  padding: 0.6rem;
}

.employeeForm label,
.employeeForm fieldset {
  display: flex;
  flex-direction: column;
  gap: 0.28rem;
  margin: 0;
  border: 0;
  padding: 0;
}

.employeeForm input,
.employeeForm select,
.toolbar input {
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: 8px;
  padding: 0.35rem 0.45rem;
  background: #ffffff;
}

.weekdayGrid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 0.22rem;
}

.weekdayToggle {
  border: var(--grid-border-width) solid var(--grid-border-color);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.28rem;
}

.employeeForm__actions {
  display: flex;
  gap: 0.4rem;
}

.employeeForm__actions button {
  flex: 1;
  border: 0;
  border-radius: 8px;
  padding: 0.5rem;
}

.employeeForm__actions button[type='submit'] {
  background: #0f8f6f;
  color: #ffffff;
}

.employeeForm__ghost {
  background: #eaf1ee;
  color: var(--text);
}

.app__footer {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.65rem 0.75rem;
}

.status {
  font-weight: 700;
}

.status--warn {
  color: #ac2542;
}

.status--ok {
  color: #0f8f6f;
}

.app.theme-variant-compact {
  --cell-padding-x: 4px;
  --cell-padding-y: 4px;
}

.app.theme-variant-contrast {
  --grid-border-color: #475569;
  --panel-bg: #f8fafc;
}

.app.theme-font-100 {
  --theme-font-scale: 1;
}

.app.theme-font-110 {
  --theme-font-scale: 1.1;
}

.app.theme-font-120 {
  --theme-font-scale: 1.2;
}

.app.theme-header-dark .app__header {
  background: linear-gradient(135deg, #0f172a, #1e293b);
}

.app.theme-header-light .app__header {
  background: linear-gradient(135deg, #e2e8f0, #f8fafc);
  color: #0f172a;
}

.app.theme-zebra-off .grid__row.is-row-even .grid__dayCell,
.app.theme-zebra-off .grid__row.is-row-even .grid__employeeCell,
.app.theme-zebra-off .grid__row.is-row-odd .grid__dayCell,
.app.theme-zebra-off .grid__row.is-row-odd .grid__employeeCell {
  background: var(--row-even-bg);
}

.app.theme-borders-custom {
  --grid-border-width: 2px;
  --divider-header-body-width: 4px;
  --divider-employee-days-width: 4px;
}

.app.theme-borders-sundaysOnly .grid__dayCell.is-sunday {
  border-right-width: var(--divider-header-body-width);
}

.board.exportMode .no-export {
  display: none;
}

.board.exportMode {
  --cell-height: var(--cell-height-print);
}

.app.pdf-export .grid__footerRow {
  display: none !important;
}

.app.pdf-export .grid__employeeRole {
  display: none !important;
}

@media (max-width: 1100px) {
  .app__main {
    grid-template-columns: 1fr;
  }
}

@media print {
  :root {
    --cell-height: var(--cell-height-print);
  }

  .no-print,
  .no-export,
  .toolbar,
  .themePanel,
  .employeePanel,
  .app__header,
  .app__footer {
    display: none !important;
  }

  .app,
  .app__main,
  .board,
  .calendarWrap,
  .grid {
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    box-shadow: none !important;
    width: 100% !important;
    max-width: 100% !important;
  }
}
